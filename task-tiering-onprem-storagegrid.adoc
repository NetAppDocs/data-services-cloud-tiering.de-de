---
sidebar: sidebar 
permalink: task-tiering-onprem-storagegrid.html 
keywords: data tiering, fabricpool, cloud tiering, tiering cold data, tiering inactive data, tiering aff, tiering fas, tiering ontap, tiering volumes, tier data, tier cold data, tier fas, tier aff, tier ontap, storagegrid, tier to storagegrid, fabricpool storagegrid 
summary: Geben Sie Speicherplatz auf Ihren lokalen ONTAP Clustern frei, indem Sie inaktive Daten in NetApp Cloud Tiering auf StorageGRID auslagern. 
---
= Tiering von Daten von lokalen ONTAP Clustern zu StorageGRID in NetApp Cloud Tiering
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Geben Sie Speicherplatz auf Ihren lokalen ONTAP Clustern frei, indem Sie inaktive Daten in NetApp Cloud Tiering auf StorageGRID auslagern.



== Schnellstart

Beginnen Sie schnell, indem Sie diese Schritte befolgen, oder scrollen Sie nach unten zu den restlichen Abschnitten, um alle Einzelheiten zu erfahren.

.image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-1.png["Eins"]Bereiten Sie die Datenschichtung in StorageGRID vor
[role="quick-margin-para"]
Sie benötigen Folgendes:

[role="quick-margin-list"]
* Ein lokaler ONTAP -Quellcluster, auf dem ONTAP 9.4 oder höher ausgeführt wird, den Sie zur NetApp Console hinzugefügt haben, und eine Verbindung über einen benutzerdefinierten Port zu StorageGRID. https://docs.netapp.com/us-en/bluexp-ontap-onprem/task-discovering-ontap.html["Erfahren Sie, wie Sie einen Cluster erkennen"^] .
* StorageGRID 10.3 oder höher mit AWS-Zugriffsschlüsseln mit S3-Berechtigungen.
* Ein bei Ihnen vor Ort installierter Konsolenagent.
* Netzwerk für den Agenten, der eine ausgehende HTTPS-Verbindung zum ONTAP Cluster, zu StorageGRID und zum Cloud Tiering-Dienst ermöglicht.


.image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-2.png["Zwei"]Einrichten von Tiering
[role="quick-margin-para"]
Wählen Sie in der NetApp Console ein lokales System aus, wählen Sie *Aktivieren* für Cloud Tiering und folgen Sie den Anweisungen, um die Daten in StorageGRID zu verschieben.



== Anforderungen

Überprüfen Sie die Unterstützung für Ihren ONTAP Cluster, richten Sie Ihr Netzwerk ein und bereiten Sie Ihren Objektspeicher vor.

Das folgende Bild zeigt jede Komponente und die Verbindungen, die Sie zwischen ihnen vorbereiten müssen:

image:diagram_cloud_tiering_storagegrid.png["Ein Architekturbild, das den Cloud Tiering-Dienst mit einer Verbindung zum Agenten vor Ort, den Agenten mit einer Verbindung zu Ihrem ONTAP Cluster und eine Verbindung zwischen dem ONTAP Cluster und dem Objektspeicher zeigt.  Aktive Daten befinden sich auf dem ONTAP Cluster, während inaktive Daten im Objektspeicher gespeichert sind."]


NOTE: Die Kommunikation zwischen dem Agenten und StorageGRID dient nur der Einrichtung des Objektspeichers.



=== Bereiten Sie Ihre ONTAP -Cluster vor

Ihre ONTAP Cluster müssen die folgenden Anforderungen erfüllen, wenn Sie Daten auf StorageGRID auslagern.

Unterstützte ONTAP -Plattformen::
+
--
* Bei Verwendung von ONTAP 9.8 und höher: Sie können Daten von AFF -Systemen oder FAS Systemen mit reinen SSD- oder reinen HDD-Aggregaten stufen.
* Bei Verwendung von ONTAP 9.7 und früher: Sie können Daten von AFF -Systemen oder FAS Systemen mit reinen SSD-Aggregaten stufen.


--
Unterstützte ONTAP -Version:: ONTAP 9.4 oder höher
Lizenzierung:: In Ihrer NetApp Console -Organisation ist weder eine Cloud Tiering-Lizenz noch eine FabricPool -Lizenz auf dem ONTAP Cluster erforderlich, wenn Sie Daten auf StorageGRID tieren.
Cluster-Netzwerkanforderungen::
+
--
* Der ONTAP Cluster initiiert über einen benutzerdefinierten Port eine HTTPS-Verbindung zum StorageGRID -Gateway-Knoten (der Port kann während der Tiering-Einrichtung konfiguriert werden).
+
ONTAP liest und schreibt Daten in den und aus dem Objektspeicher.  Der Objektspeicher wird nie initiiert, er reagiert nur.

* Es ist eine eingehende Verbindung vom Agenten erforderlich, der sich in Ihrem Unternehmen befinden muss.
+
Eine Verbindung zwischen dem Cluster und dem Cloud Tiering-Dienst ist nicht erforderlich.

* Auf jedem ONTAP Knoten, der die Volumes hostet, die Sie in ein Tiering einteilen möchten, ist ein Intercluster-LIF erforderlich.  Das LIF muss mit dem _IPspace_ verknüpft sein, den ONTAP für die Verbindung mit dem Objektspeicher verwenden soll.
+
Wenn Sie die Datenschichtung einrichten, werden Sie von Cloud Tiering aufgefordert, den zu verwendenden IP-Bereich anzugeben.  Sie sollten den IPspace auswählen, mit dem jedes LIF verknüpft ist.  Dies kann der „Standard“-IP-Bereich oder ein benutzerdefinierter IP-Bereich sein, den Sie erstellt haben.  Erfahren Sie mehr über https://docs.netapp.com/us-en/ontap/networking/create_a_lif.html["LIFs"^] Und https://docs.netapp.com/us-en/ontap/networking/standard_properties_of_ipspaces.html["IPspaces"^] .



--
Unterstützte Volumes und Aggregate:: Die Gesamtzahl der Volumes, die Cloud Tiering in Tiering einteilen kann, ist möglicherweise geringer als die Anzahl der Volumes auf Ihrem ONTAP System.  Das liegt daran, dass Volumes aus einigen Aggregaten nicht gestaffelt werden können.  Weitere Informationen finden Sie in der ONTAP -Dokumentation. https://docs.netapp.com/us-en/ontap/fabricpool/requirements-concept.html#functionality-or-features-not-supported-by-fabricpool["Funktionen oder Features, die von FabricPool nicht unterstützt werden"^] .



NOTE: Cloud Tiering unterstützt FlexGroup -Volumes ab ONTAP 9.5.  Die Einrichtung funktioniert genauso wie bei jedem anderen Volume.



=== Entdecken Sie einen ONTAP -Cluster

Sie müssen der NetApp Console ein lokales ONTAP -System hinzufügen, bevor Sie mit dem Tiering kalter Daten beginnen können.

https://docs.netapp.com/us-en/bluexp-ontap-onprem/task-discovering-ontap.html["Erfahren Sie, wie Sie einen Cluster erkennen"^].



=== StorageGRID vorbereiten

StorageGRID muss die folgenden Anforderungen erfüllen.

Unterstützte StorageGRID Versionen:: StorageGRID 10.3 und höher wird unterstützt.


[[preparing-storagegrid]]
S3-Anmeldeinformationen:: Wenn Sie das Tiering für StorageGRID einrichten, müssen Sie Cloud Tiering einen S3-Zugriffsschlüssel und einen geheimen Schlüssel bereitstellen.  Cloud Tiering verwendet die Schlüssel, um auf Ihre Buckets zuzugreifen.
+
--
Diese Zugriffsschlüssel müssen einem Benutzer zugeordnet sein, der über die folgenden Berechtigungen verfügt:

[source, json]
----
"s3:ListAllMyBuckets",
"s3:ListBucket",
"s3:GetObject",
"s3:PutObject",
"s3:DeleteObject",
"s3:CreateBucket"
----
--
Objektversionierung:: Sie dürfen die StorageGRID Objektversionierung im Objektspeicher-Bucket nicht aktivieren.




=== Erstellen oder Wechseln von Konsolenagenten

Der Konsolenagent ist erforderlich, um Daten in die Cloud zu verschieben.  Beim Tiering von Daten zu StorageGRID muss bei Ihnen vor Ort ein Agent verfügbar sein.

Sie müssen über die Rolle des Organisationsadministrators verfügen, um einen Agenten zu erstellen.

* https://docs.netapp.com/us-en/bluexp-setup-admin/concept-connectors.html["Erfahren Sie mehr über Agenten"^]
* https://docs.netapp.com/us-en/bluexp-setup-admin/task-install-connector-on-prem.html["Installieren und Einrichten eines Agenten vor Ort"^]
* https://docs.netapp.com/us-en/bluexp-setup-admin/task-manage-multiple-connectors.html#switch-between-connectors["Zwischen Agenten wechseln"^]




=== Vorbereiten des Netzwerks für den Konsolenagenten

Stellen Sie sicher, dass der Agent über die erforderlichen Netzwerkverbindungen verfügt.

.Schritte
. Stellen Sie sicher, dass das Netzwerk, in dem der Agent installiert ist, die folgenden Verbindungen ermöglicht:
+
** Eine HTTPS-Verbindung über Port 443 zum Cloud Tiering-Dienst(https://docs.netapp.com/us-en/bluexp-setup-admin/task-set-up-networking-on-prem.html#endpoints-contacted-for-day-to-day-operations["siehe Liste der Endpunkte"^] )
** Eine HTTPS-Verbindung über Port 443 zu Ihrem StorageGRID -System
** Eine HTTPS-Verbindung über Port 443 zu Ihrem ONTAP Cluster-Management-LIF






== Inaktive Daten von Ihrem ersten Cluster in StorageGRID einordnen

Nachdem Sie Ihre Umgebung vorbereitet haben, beginnen Sie mit der Tiering-Verteilung inaktiver Daten aus Ihrem ersten Cluster.

.Was du brauchst
* https://docs.netapp.com/us-en/bluexp-ontap-onprem/task-discovering-ontap.html["Ein lokales System, das der NetApp Console hinzugefügt wurde"^].
* Der FQDN des StorageGRID -Gateway-Knotens und der Port, der für die HTTPS-Kommunikation verwendet wird.
* Ein AWS-Zugriffsschlüssel mit den erforderlichen S3-Berechtigungen.


.Schritte
. Wählen Sie das lokale ONTAP -System aus.
. Klicken Sie im rechten Bereich auf *Aktivieren* für Cloud Tiering.
+
Wenn das StorageGRID -Tiering-Ziel als System in der NetApp Console vorhanden ist, können Sie den Cluster auf das StorageGRID -System ziehen, um den Setup-Assistenten zu starten.

+
image:screenshot_setup_tiering_onprem.png["Ein Screenshot, der die Option „Setup Tiering“ zeigt, die auf der rechten Seite des Bildschirms angezeigt wird, nachdem Sie ein lokales ONTAP System ausgewählt haben."]

. *Name des Objektspeichers definieren*: Geben Sie einen Namen für diesen Objektspeicher ein.  Es muss sich von allen anderen Objektspeichern unterscheiden, die Sie möglicherweise mit Aggregaten auf diesem Cluster verwenden.
. *Anbieter auswählen*: Wählen Sie * StorageGRID* und dann *Weiter*.
. Führen Sie die Schritte auf den Seiten *Objektspeicher erstellen* aus:
+
.. *Server*: Geben Sie den FQDN des StorageGRID -Gateway-Knotens, den Port, den ONTAP für die HTTPS-Kommunikation mit StorageGRID verwenden soll, sowie den Zugriffsschlüssel und den geheimen Schlüssel für ein Konto ein, das über die erforderlichen S3-Berechtigungen verfügt.
.. *Bucket*: Fügen Sie einen neuen Bucket hinzu oder wählen Sie einen vorhandenen Bucket aus, der mit dem Präfix _fabric-pool_ beginnt, und wählen Sie *Weiter*.
+
Das Präfix _fabric-pool_ ist erforderlich, da die IAM-Richtlinie für den Agenten es der Instanz ermöglicht, S3-Aktionen für Buckets auszuführen, die genau mit diesem Präfix benannt sind.  Sie könnten den S3-Bucket beispielsweise _fabric-pool-AFF1_ nennen, wobei AFF1 der Name des Clusters ist.

.. *Cluster-Netzwerk*: Wählen Sie den IP-Bereich aus, den ONTAP für die Verbindung mit dem Objektspeicher verwenden soll, und wählen Sie *Weiter*.
+
Durch die Auswahl des richtigen IP-Bereichs wird sichergestellt, dass Cloud Tiering eine Verbindung von ONTAP zum StorageGRID Objektspeicher herstellen kann.

+
Sie können auch die zum Hochladen inaktiver Daten in den Objektspeicher verfügbare Netzwerkbandbreite festlegen, indem Sie die „Maximale Übertragungsrate“ definieren.  Wählen Sie das Optionsfeld *Begrenzt* und geben Sie die maximal nutzbare Bandbreite ein, oder wählen Sie *Unbegrenzt*, um anzugeben, dass keine Begrenzung besteht.



. Wählen Sie auf der Seite „Tier Volumes“ die Volumes aus, für die Sie Tiering konfigurieren möchten, und starten Sie die Seite „Tiering Policy“:
+
** Um alle Bände auszuwählen, aktivieren Sie das Kontrollkästchen in der Titelzeile (image:button_backup_all_volumes.png[""] ) und wählen Sie *Volumes konfigurieren*.
** Um mehrere Volumes auszuwählen, aktivieren Sie das Kontrollkästchen für jedes Volume (image:button_backup_1_volume.png[""] ) und wählen Sie *Volumes konfigurieren*.
** Um ein einzelnes Volume auszuwählen, wählen Sie die Zeile (oderimage:screenshot_edit_icon.gif["Bleistiftsymbol bearbeiten"] Symbol) für die Lautstärke.
+
image:screenshot_tiering_initial_volumes.png["Ein Screenshot, der zeigt, wie Sie ein einzelnes Volume, mehrere Volumes oder alle Volumes auswählen und die Schaltfläche „Ausgewählte Volumes ändern“ verwenden."]



. Wählen Sie im Dialogfeld „Tiering-Richtlinie“ eine Tiering-Richtlinie aus, passen Sie optional die Kühltage für die ausgewählten Volumes an und wählen Sie „Übernehmen“ aus.
+
link:concept-cloud-tiering.html#volume-tiering-policies["Erfahren Sie mehr über Volumenstaffelungsrichtlinien und Kühltage"].

+
image:screenshot_tiering_initial_policy_settings.png["Ein Screenshot, der die konfigurierbaren Tiering-Richtlinieneinstellungen zeigt."]



.Wie geht es weiter?
Sie können Informationen zu den aktiven und inaktiven Daten auf dem Cluster überprüfen. link:task-managing-tiering.html["Erfahren Sie mehr über die Verwaltung Ihrer Tiering-Einstellungen"] .

Sie können auch zusätzlichen Objektspeicher erstellen, wenn Sie Daten aus bestimmten Aggregaten eines Clusters auf verschiedene Objektspeicher verteilen möchten.  Oder wenn Sie FabricPool Mirroring verwenden möchten, bei dem Ihre mehrstufigen Daten in einen zusätzlichen Objektspeicher repliziert werden. link:task-managing-object-storage.html["Weitere Informationen zur Verwaltung von Objektspeichern"] .
