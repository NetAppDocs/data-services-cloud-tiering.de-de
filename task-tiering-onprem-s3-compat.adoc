---
sidebar: sidebar 
permalink: task-tiering-onprem-s3-compat.html 
keywords: data tiering, fabricpool, cloud tiering, tiering cold data, tiering inactive data, tiering aff, tiering fas, tiering ontap, tiering volumes, tier data, tier cold data, tier fas, tier aff, tier ontap, s3, tier to s3, minio 
summary: 'Geben Sie Speicherplatz auf Ihren lokalen ONTAP Clustern frei, indem Sie inaktive Daten auf einen beliebigen Object Storage-Dienst auslagern, der das Simple Storage Service (S3)-Protokoll verwendet.' 
---
= Daten von lokalen ONTAP Clustern in S3-Objektspeicher in NetApp Cloud Tiering verschieben
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Geben Sie Speicherplatz auf Ihren lokalen ONTAP Clustern frei, indem Sie inaktive Daten in NetApp Cloud Tiering auf einen beliebigen Objektspeicherdienst auslagern, der das Simple Storage Service (S3)-Protokoll verwendet.

Zu diesem Zeitpunkt wurde der MinIO-Objektspeicher qualifiziert.

[CAUTION]
====
Kunden, die nicht offiziell unterstützte Objektspeicher als Cloud-Tier verwenden möchten, können dies mithilfe dieser Anweisungen tun.  Kunden müssen testen und bestätigen, dass der Objektspeicher ihren Anforderungen entspricht.

NetApp leistet keinen Support und haftet nicht für Probleme, die durch Object Store Services von Drittanbietern entstehen, insbesondere wenn keine Supportvereinbarungen mit dem Drittanbieter bestehen, von dem das Produkt stammt.  Es wird anerkannt und vereinbart, dass NetApp nicht für damit verbundene Schäden haftet oder anderweitig verpflichtet ist, Support für dieses Drittanbieterprodukt bereitzustellen.

====


== Schnellstart

Beginnen Sie schnell, indem Sie diese Schritte befolgen, oder scrollen Sie nach unten zu den restlichen Abschnitten, um alle Einzelheiten zu erfahren.

.image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-1.png["Eins"]Bereiten Sie die Datenschichtung in einen S3-kompatiblen Objektspeicher vor
[role="quick-margin-para"]
Sie benötigen Folgendes:

[role="quick-margin-list"]
* Ein lokaler ONTAP -Quellcluster mit ONTAP 9.8 oder höher, den Sie der NetApp Konsole hinzugefügt haben, und eine Verbindung über einen benutzerdefinierten Port zum S3-kompatiblen Zielobjektspeicher. https://docs.netapp.com/us-en/bluexp-ontap-onprem/task-discovering-ontap.html["Erfahren Sie, wie Sie einen Cluster erkennen"^] .
* Der FQDN, der Zugriffsschlüssel und der geheime Schlüssel für den Objektspeicherserver, damit der ONTAP Cluster auf den Bucket zugreifen kann.
* Ein bei Ihnen vor Ort installierter Konsolenagent.
* Netzwerk für den Agenten, der eine ausgehende HTTPS-Verbindung zum Quell- ONTAP Cluster, zum S3-kompatiblen Objektspeicher und zum Cloud Tiering-Dienst ermöglicht.


.image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-2.png["Zwei"]Einrichten von Tiering
[role="quick-margin-para"]
Wählen Sie in der Konsole ein lokales System aus, wählen Sie *Aktivieren* für den Tiering-Dienst und folgen Sie den Anweisungen, um die Daten in einen S3-kompatiblen Objektspeicher zu verschieben.

.image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-3.png["Drei"]Einrichten der Lizenzierung
[role="quick-margin-para"]
Bezahlen Sie für Cloud Tiering über ein Pay-as-you-go-Abonnement Ihres Cloud-Anbieters, eine Cloud Tiering-Bring-Your-Own-License oder eine Kombination aus beidem:

[role="quick-margin-list"]
* Um das PAYGO-Angebot von der https://aws.amazon.com/marketplace/pp/prodview-oorxakq6lq7m4?sr=0-8&ref_=beagle&applicationId=AWSMPContessa["AWS Marketplace"^] , https://azuremarketplace.microsoft.com/en-us/marketplace/apps/netapp.cloud-manager?tab=Overview["Azure Marketplace"^] , oder https://console.cloud.google.com/marketplace/details/netapp-cloudmanager/cloud-manager?supportedpurview=project&rif_reserved["GCP Marketplace"^] , wählen Sie *Abonnieren* und folgen Sie den Anweisungen.
* Um mit einer Cloud Tiering BYOL-Lizenz zu bezahlen, mailto:ng-cloud-tiering@netapp.com?subject=Licensing[kontaktieren Sie uns, wenn Sie eine kaufen müssen], und dannlink:https://docs.netapp.com/us-en/bluexp-digital-wallet/task-manage-data-services-licenses.html["Fügen Sie es der NetApp Konsole hinzu"^] . .




== Anforderungen

Überprüfen Sie die Unterstützung für Ihren ONTAP Cluster, richten Sie Ihr Netzwerk ein und bereiten Sie Ihren Objektspeicher vor.

Das folgende Bild zeigt jede Komponente und die Verbindungen, die Sie zwischen ihnen vorbereiten müssen:

image:diagram_cloud_tiering_s3_compat.png["Ein Architekturbild, das den Cloud Tiering-Dienst mit einer Verbindung zum Agenten vor Ort, den Agenten mit einer Verbindung zu Ihrem ONTAP Cluster und eine Verbindung zwischen dem ONTAP Cluster und dem Objektspeicher zeigt.  Aktive Daten befinden sich auf dem ONTAP Cluster, während inaktive Daten im Objektspeicher gespeichert sind."]


NOTE: Die Kommunikation zwischen dem Agenten und dem S3-kompatiblen Objektspeicherserver dient nur der Einrichtung des Objektspeichers.



=== Bereiten Sie Ihre ONTAP -Cluster vor

Ihre Quell- ONTAP Cluster müssen die folgenden Anforderungen erfüllen, wenn Sie Daten in einen S3-kompatiblen Objektspeicher verschieben.

Unterstützte ONTAP -Plattformen:: Sie können Daten von AFF -Systemen oder FAS Systemen mit reinen SSD- oder reinen HDD-Aggregaten stufen.
Unterstützte ONTAP -Version:: ONTAP 9.8 oder höher
Cluster-Netzwerkanforderungen::
+
--
* Der ONTAP Cluster initiiert über einen benutzerdefinierten Port eine HTTPS-Verbindung zum S3-kompatiblen Objektspeicher (der Port kann während der Tiering-Einrichtung konfiguriert werden).
+
Das Quell- ONTAP -System liest und schreibt Daten in den und aus dem Objektspeicher.  Der Objektspeicher wird nie initiiert, er reagiert nur.

* Es ist eine eingehende Verbindung vom Agenten erforderlich, der sich in Ihrem Unternehmen befinden muss.
+
Eine Verbindung zwischen dem Cluster und dem Cloud Tiering-Dienst ist nicht erforderlich.

* Auf jedem ONTAP Knoten, der die Volumes hostet, die Sie in ein Tiering einteilen möchten, ist ein Intercluster-LIF erforderlich.  Das LIF muss mit dem _IPspace_ verknüpft sein, den ONTAP für die Verbindung mit dem Objektspeicher verwenden soll.
+
Wenn Sie die Datenschichtung einrichten, werden Sie von Cloud Tiering aufgefordert, den zu verwendenden IP-Bereich anzugeben.  Sie sollten den IPspace auswählen, mit dem jedes LIF verknüpft ist.  Dies kann der „Standard“-IP-Bereich oder ein benutzerdefinierter IP-Bereich sein, den Sie erstellt haben.  Erfahren Sie mehr über https://docs.netapp.com/us-en/ontap/networking/create_a_lif.html["LIFs"^] Und https://docs.netapp.com/us-en/ontap/networking/standard_properties_of_ipspaces.html["IPspaces"^] .



--
Unterstützte Volumes und Aggregate:: Die Gesamtzahl der Volumes, die Cloud Tiering in Tiering einteilen kann, ist möglicherweise geringer als die Anzahl der Volumes auf Ihrem ONTAP System.  Das liegt daran, dass Volumes aus einigen Aggregaten nicht gestaffelt werden können.  Weitere Informationen finden Sie in der ONTAP -Dokumentation. https://docs.netapp.com/us-en/ontap/fabricpool/requirements-concept.html#functionality-or-features-not-supported-by-fabricpool["Funktionen oder Features, die von FabricPool nicht unterstützt werden"^] .



TIP: Cloud Tiering unterstützt sowohl FlexVol als auch FlexGroup -Volumes.



=== Entdecken Sie einen ONTAP -Cluster

Sie müssen Ihr lokales ONTAP -System zur Konsole hinzufügen, bevor Sie mit der Einstufung kalter Daten beginnen können.

https://docs.netapp.com/us-en/bluexp-ontap-onprem/task-discovering-ontap.html["Erfahren Sie, wie Sie einen Cluster erkennen"^] .



=== S3-kompatiblen Objektspeicher vorbereiten

S3-kompatibler Objektspeicher muss die folgenden Anforderungen erfüllen.

S3-Anmeldeinformationen:: Wenn Sie das Tiering für S3-kompatiblen Objektspeicher einrichten, werden Sie aufgefordert, einen S3-Bucket zu erstellen oder einen vorhandenen S3-Bucket auszuwählen.  Sie müssen Cloud Tiering einen S3-Zugriffsschlüssel und einen geheimen Schlüssel bereitstellen.  Cloud Tiering verwendet die Schlüssel, um auf Ihren Bucket zuzugreifen.
+
--
Diese Zugriffsschlüssel müssen einem Benutzer zugeordnet sein, der über die folgenden Berechtigungen verfügt:

[source, json]
----
"s3:ListAllMyBuckets",
"s3:ListBucket",
"s3:GetObject",
"s3:PutObject",
"s3:DeleteObject",
"s3:CreateBucket"
----
--




=== Agenten erstellen oder wechseln

Zum Tiering von Daten in der Cloud ist ein Konsolenagent erforderlich.  Beim Tiering von Daten in einen S3-kompatiblen Objektspeicher muss bei Ihnen vor Ort ein Agent verfügbar sein.  Sie müssen entweder einen neuen Agenten installieren oder sicherstellen, dass der aktuell ausgewählte Agent vor Ort vorhanden ist.

* https://docs.netapp.com/us-en/bluexp-setup-admin/concept-connectors.html["Erfahren Sie mehr über Agenten"^]
* https://docs.netapp.com/us-en/bluexp-setup-admin/task-install-connector-on-prem.html["Installieren und Einrichten eines Agenten vor Ort"^]
* https://docs.netapp.com/us-en/bluexp-setup-admin/task-manage-multiple-connectors.html#switch-between-connectors["Zwischen Agenten wechseln"^]




=== Vorbereiten des Netzwerks für den Konsolenagenten

Stellen Sie sicher, dass der Agent über die erforderlichen Netzwerkverbindungen verfügt.

.Schritte
. Stellen Sie sicher, dass das Netzwerk, in dem der Agent installiert ist, die folgenden Verbindungen ermöglicht:
+
** Eine HTTPS-Verbindung über Port 443 zum Cloud Tiering-Dienst(https://docs.netapp.com/us-en/bluexp-setup-admin/task-set-up-networking-on-prem.html#endpoints-contacted-for-day-to-day-operations["siehe die Liste der Endpunkte"^] )
** Eine HTTPS-Verbindung über Port 443 zu S3-kompatiblem Objektspeicher
** Eine HTTPS-Verbindung über Port 443 zu Ihrem ONTAP Cluster-Management-LIF






== Tiering inaktiver Daten von Ihrem ersten Cluster in einen S3-kompatiblen Objektspeicher

Nachdem Sie Ihre Umgebung vorbereitet haben, beginnen Sie mit der Tiering-Verteilung inaktiver Daten aus Ihrem ersten Cluster.

.Was du brauchst
* https://docs.netapp.com/us-en/bluexp-ontap-onprem/task-discovering-ontap.html["Ein lokales System, das zur NetApp Konsole hinzugefügt wurde"^] .
* Der FQDN des S3-kompatiblen Objektspeicherservers und der Port, der für die HTTPS-Kommunikation verwendet wird.
* Ein Zugriffsschlüssel und ein geheimer Schlüssel mit den erforderlichen S3-Berechtigungen.


.Schritte
. Wählen Sie das lokale ONTAP -System aus.
. Klicken Sie im rechten Bereich auf *Aktivieren* für den Cloud Tiering-Dienst.
+
image:screenshot_setup_tiering_onprem.png["Ein Screenshot, der die Tiering-Option zeigt, die auf der rechten Seite des Bildschirms angezeigt wird, nachdem Sie ein lokales ONTAP -System ausgewählt haben."]

. *Name des Objektspeichers definieren*: Geben Sie einen Namen für diesen Objektspeicher ein.  Es muss sich von allen anderen Objektspeichern unterscheiden, die Sie möglicherweise mit Aggregaten auf diesem Cluster verwenden.
. *Anbieter auswählen*: Wählen Sie *S3-kompatibel* und dann *Weiter*.
. *Anbieter auswählen*: Wählen Sie *S3-kompatibel* und dann *Weiter*.
. Führen Sie die Schritte auf den Seiten *Objektspeicher erstellen* aus:
+
.. *Server*: Geben Sie den FQDN des S3-kompatiblen Objektspeicherservers, den Port, den ONTAP für die HTTPS-Kommunikation mit dem Server verwenden soll, sowie den Zugriffsschlüssel und den geheimen Schlüssel für ein Konto ein, das über die erforderlichen S3-Berechtigungen verfügt.
.. *Bucket*: Fügen Sie einen neuen Bucket hinzu oder wählen Sie einen vorhandenen Bucket aus und wählen Sie *Weiter*.
.. *Bucket*: Fügen Sie einen neuen Bucket hinzu oder wählen Sie einen vorhandenen Bucket aus und wählen Sie *Weiter*.
.. *Cluster-Netzwerk*: Wählen Sie den IP-Bereich aus, den ONTAP für die Verbindung mit dem Objektspeicher verwenden soll, und wählen Sie *Weiter*.
.. *Cluster-Netzwerk*: Wählen Sie den IP-Bereich aus, den ONTAP für die Verbindung mit dem Objektspeicher verwenden soll, und wählen Sie *Weiter*.
+
Durch die Auswahl des richtigen IPspace wird sichergestellt, dass Cloud Tiering eine Verbindung von ONTAP zu Ihrem S3-kompatiblen Objektspeicher herstellen kann.

+
Sie können auch die zum Hochladen inaktiver Daten in den Objektspeicher verfügbare Netzwerkbandbreite festlegen, indem Sie die „Maximale Übertragungsrate“ definieren.  Wählen Sie das Optionsfeld *Begrenzt* und geben Sie die maximal nutzbare Bandbreite ein, oder wählen Sie *Unbegrenzt*, um anzugeben, dass keine Begrenzung besteht.



. Wählen Sie auf der Seite „Erfolgreich“ die Option „Weiter“, um Ihre Volumes jetzt einzurichten.
. Wählen Sie auf der Seite „Tier Volumes“ die Volumes aus, für die Sie Tiering konfigurieren möchten, und wählen Sie „Weiter“ aus:
+
** Um alle Bände auszuwählen, aktivieren Sie das Kontrollkästchen in der Titelzeile (image:button_backup_all_volumes.png[""] ) und wählen Sie *Volumes konfigurieren*.
** Um mehrere Volumes auszuwählen, aktivieren Sie das Kontrollkästchen für jedes Volume (image:button_backup_1_volume.png[""] ) und wählen Sie *Volumes konfigurieren*.
** Um ein einzelnes Volume auszuwählen, wählen Sie die Zeile (oderimage:screenshot_edit_icon.gif["Bleistiftsymbol bearbeiten"] Symbol) für die Lautstärke.
+
image:screenshot_tiering_initial_volumes.png["Ein Screenshot, der zeigt, wie Sie ein einzelnes Volume, mehrere Volumes oder alle Volumes auswählen und die Schaltfläche „Ausgewählte Volumes ändern“ verwenden."]



. Wählen Sie im Dialogfeld „Tiering-Richtlinie“ eine Tiering-Richtlinie aus, passen Sie optional die Kühltage für die ausgewählten Volumes an und wählen Sie „Übernehmen“ aus.
+
link:concept-cloud-tiering.html#volume-tiering-policies["Erfahren Sie mehr über Volumenstaffelungsrichtlinien und Kühltage"] .

+
image:screenshot_tiering_initial_policy_settings.png["Ein Screenshot, der die konfigurierbaren Tiering-Richtlinieneinstellungen zeigt."]



.Wie geht es weiter?
link:task-licensing-cloud-tiering.html["Abonnieren Sie unbedingt den Cloud Tiering-Dienst"] .

Sie können Informationen zu den aktiven und inaktiven Daten auf dem Cluster überprüfen. link:task-managing-tiering.html["Erfahren Sie mehr über die Verwaltung Ihrer Tiering-Einstellungen"] .

Sie können auch zusätzlichen Objektspeicher erstellen, wenn Sie Daten aus bestimmten Aggregaten eines Clusters auf verschiedene Objektspeicher verteilen möchten.  Oder wenn Sie FabricPool Mirroring verwenden möchten, bei dem Ihre mehrstufigen Daten in einen zusätzlichen Objektspeicher repliziert werden. link:task-managing-object-storage.html["Weitere Informationen zur Verwaltung von Objektspeichern"] .
